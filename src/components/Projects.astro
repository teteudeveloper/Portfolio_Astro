---
import ProjectCard from './ProjectCard';
import { dictionaries } from "../i18n";

const locale =
  Astro.cookies.get("locale")?.value === "pt" ? "pt" : "en";

const t = dictionaries[locale];

type ProjectId = keyof typeof t.projects.projectsList;

type Project = {
  id: ProjectId;
  image: string;
  imagePosition?: string;
  github: string;
  technologies: { name: string; icon: string }[];
};

const projects: Project[] = [
  {
    id: 'simpleCRM',
    image: '',
    imagePosition: 'center 8%',
    github: 'https://github.com/teteudeveloper/SimpleCRM',
    technologies: [
      { name: 'Next.js', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nextjs/nextjs-original.svg' },
      { name: 'React', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg' },
      { name: 'TypeScript', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg' },
      { name: 'Tailwind CSS', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/tailwindcss/tailwindcss-original.svg' },
      { name: 'Prisma', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/prisma/prisma-original.svg' },
      { name: 'PostgreSQL', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/postgresql/postgresql-original.svg' },
      { name: 'Docker', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg' }
    ]
  },
  {
    id: 'orderFlow',
    image: '',
    imagePosition: 'center 8%',
    github: 'https://github.com/teteudeveloper/orderflow-api',
    technologies: [
      { name: 'Java', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg' },
      { name: 'Spring Boot', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/spring/spring-original.svg' },
      { name: 'Spring Data JPA', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/spring/spring-original.svg' },
      { name: 'PostgreSQL', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/postgresql/postgresql-original.svg' },
      { name: 'Docker', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg' }
    ]
  },
    {
    id: 'saldofy',
    image: '',
    imagePosition: 'center 8%',
    github: 'https://github.com/teteudeveloper/Saldofy',
    technologies: [
      { name: 'Next.js', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nextjs/nextjs-original.svg' },
      { name: 'TypeScript', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg' },
      { name: 'Tailwind CSS', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/tailwindcss/tailwindcss-original.svg' },
      { name: 'Prisma', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/prisma/prisma-original.svg' },
      { name: 'PostgreSQL', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/postgresql/postgresql-original.svg' },
      { name: 'Docker', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg' }
    ]
  },
];

const translatedProjects = projects.map((project) => ({
  ...project,
  title: t.projects.projectsList[project.id].title,
  description: t.projects.projectsList[project.id].description,
}));
---

<section
  id="projects"
  class="min-h-screen pt-16 bg-bg-light dark:bg-bg-dark text-text-light dark:text-text-dark"
>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-20">
    <div class="max-w-7xl mx-auto">
      <div class="text-center mb-16">
        <h2 class="text-5xl lg:text-6xl font-bold mb-6">
          {t.projects.title}
        </h2>
        <p class="text-lg sm:text-xl opacity-80 max-w-2xl mx-auto">
          {t.projects.description}
        </p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">
        {translatedProjects.map((project) => (
          <ProjectCard project={project} client:load />
        ))}
      </div>
    </div>
  </div>
</section>
